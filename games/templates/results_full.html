{% extends "base.html" %}
{% load humanize %}

{% block content %}

    <div class="column-wrapper">

        <div id="details-column" class="column">

            <div id="page-header">
                LEAGUE RESULTS
            </div>

            {% if results %}

                {% for date in dates %}

                    <div class="sub-header">
                        {{ date }}
                    </div>

                    {% for result in results %}

                        {% if result.game_date == date %}

                            <table class="stat-table">
                                <tr class="header-row">
                                    <th class="stat-intro">
                                        {% if result.game_status != "Completed" %}
                                                {% if result.game_status == "Postponed" %}
                                                    POSTPONED
                                                {% else %}
                                                    SUSPENDED ({{ result.innings|ordinal }})
                                                {% endif %}
                                        {% else %}
                                            FINAL {% if result.innings > 9 %}({{ result.innings }}){% endif %}
                                        {% endif %}
                                    </th>
                                    <th class="stat-column">R</th>
                                    <th class="stat-column">H</th>
                                    <th class="stat-column">E</th>
                                </tr>
                                <tr>
                                    <td class="stat-header"><img class="small-logo" src="/media/{{ result.away_team.small_logo }}" />
                                        <a class="table-link" href="/scores/{{ result.away_team.geographic_name|lower }}">
                                            {% if result.game_status == "Completed" and result.away_team_runs > result.home_team_runs %}
                                                <strong>{{ result.away_team }}</strong>
                                            {% else %}
                                                {{ result.away_team }}
                                            {% endif %}
                                        </a>
                                    </td>
                                    {% if result.game_status == "Postponed" %}
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    {% else %}
                                        <td class="stat-detail"><strong>{{ result.away_team_runs }}</strong></td>
                                        <td class="stat-detail-faint">{{ result.away_team_hits }}</td>
                                        <td class="stat-detail-faint">{{ result.away_team_errors }}</td>
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td class="stat-header"><img class="small-logo" src="/media/{{ result.home_team.small_logo }}" />
                                        <a class="table-link" href="/scores/{{ result.home_team.geographic_name|lower }}">
                                            {% if result.game_status == "Completed" and result.home_team_runs > result.away_team_runs %}
                                                <strong>{{ result.home_team }}</strong>
                                            {% else %}
                                                {{ result.home_team }}
                                            {% endif %}
                                        </a>
                                    </td>
                                    {% if result.game_status == "Postponed" %}
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    {% else %}
                                        <td class="stat-detail"><strong>{{ result.home_team_runs }}</strong></td>
                                        <td class="stat-detail-faint">{{ result.home_team_hits }}</td>
                                        <td class="stat-detail-faint">{{ result.home_team_errors }}</td>
                                    {% endif %}
                                </tr>
                            </table>

                        {% endif %}

                    {% endfor %}

                {% endfor %}

                <!–– In pagination for results, next page is placed in previous page section and vice-versa.
                Although this appears counter-intuitive, it is done in order to facilitate default display
                with most recent results appearing first overall, as well as on each page. --!>

                <div class="pagination-links">

                    <div class="pagination-section previous-page">
                        {% if dates.has_next %}
                            <a class="standard-link" href="?page={{ dates.next_page_number }}"><< Earlier Results</a>
                        {% endif %}
                    </div>

                    <div class="pagination-section next-page">
                        {% if dates.has_previous %}
                            <a class="standard-link" href="?page={{ dates.previous_page_number }}">Later Results >></a>
                        {% endif %}
                    </div>

                </div>

            {% else %}

                No results available for this season.

            {% endif %}

        </div>

        <div id="stats-column" class="column for-desktop">

            <section id="standings">

                <div class="league-box colour-box">
                    STANDINGS
                </div>

                <div class="single-column">

                    {% for conference in conferences %}

                        <div class="spaced-column">

                            <div class="close-header">
                                {{ conference.name }}
                            </div>

                            {% include 'standings.html' %}

                        </div>

                    {% endfor %}

                </div>

            </section>

        </div>

    </div>

{% endblock %}