{% extends "base.html" %}

{% block content %}

    <div class="column-wrapper">

        <div id="details-column" class="column">

            <div id="page-header">
                LEAGUE SCHEDULE
            </div>

            {% if fixtures %}

                <!-- For each date when there are games scheduled, show the date followed by a list of games. -->
                {% for date in dates %}

                    <div class="sub-header">
                        {{ date|date:"d F Y" }}
                    </div>

                    <table class="stat-table alternating-rows">

                        <tr class="header-row">
                            <th>Away</th>
                            <th>@</th>
                            <th>Home</th>
                        </tr>

                        {% for fixture in fixtures %}

                            {% if fixture.game_date == date %}
                                <tr>
                                    <td class="stat-team">
                                        <a class="table-link"
                                           href="{% url 'team_games' fixture.away_team.geographic_name|lower %}">
                                            {{ fixture.away_team.geographic_name }}
                                        </a>
                                    </td>
                                    {% if fixture.game_status == "In Progress" %}
                                        <td class="stat-detail-highlight">
                                            {{ fixture.away_team_runs }} - {{ fixture.home_team_runs }}
                                        </td>
                                    {% else %}
                                        <td class="stat-detail">
                                            {{ fixture.game_time|time:'G:i' }}
                                        </td>
                                    {% endif %}
                                    <td class="stat-team">
                                        <a class="table-link" href=
                                                "{% url 'team_games' fixture.home_team.geographic_name|lower %}">
                                            {{ fixture.home_team.geographic_name }}
                                        </a>
                                    </td>
                                </tr>

                            {% endif %}

                        {% endfor %}

                    </table>

                {% endfor %}

            {% else %}

                No fixtures available for this season.

            {% endif %}

        </div>

        <div id="stats-column" class="column for-desktop">

            <section id="standings">

                <!-- Only include the standings, not the whole statistics sidebar. -->
                <div class="league-box colour-box">
                    STANDINGS
                </div>

                <div class="single-column">

                    {% for conference in conferences %}

                        <div class="spaced-column">

                            <div class="close-header">
                                {{ conference.name }}
                            </div>

                            {% include 'standings.html' %}

                        </div>

                    {% endfor %}

                </div>

            </section>

        </div>

    </div>

{% endblock %}